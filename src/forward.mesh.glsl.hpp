#ifndef __g_shader_mesh_forward_header__
#define __g_shader_mesh_forward_header__
static const char *g_shader_mesh_forward = ""
#if defined(USE_LD)
"forward.mesh.glsl"
#else
"#version 450\n"
"#extension GL_NV_mesh_shader : require\n"
"layout(local_size_x=1)in;"
"layout(points,max_vertices=96,max_primitives=96)out;"
"layout(location=0)uniform sampler3D l;"
"layout(location=1)uniform int g;"
"vec3 f[]="
"{"
"vec3(27,0,0),vec3(-16.5,-17.2,-11.4),vec3(-16.5,-17.2,-11.4),vec3(0,-1,.04),vec3(0,-1,.04),vec3(25,0,0),vec3(-16.5,-17.2,-11.4),vec3(-16.5,-15,-11.4),vec3(0,-1,.04),vec3(0,-1,.04),vec3(40,0,0),vec3(-23.6,-7.36,-8.22),vec3(-20,-8,-12),vec3(-.9,.2,-.4),vec3(-.7,.6,-.4),vec3(40,0,0),vec3(-18,-25.8,82.2),vec3(-20,-69,80),vec3(-.97,.14,-.18),vec3(-.97,.14,-.18),vec3(52,0,0),vec3(88,-170,116),vec3(30,-166,70),vec3(-.6,.3,-.7),vec3(-.89,.1,-.45),vec3(50,0,0),vec3(-5.5,2,-7.4),vec3(10.6,2.4,-1),vec3(.2,.07,-1),vec3(.9,.2,-.4),vec3(60,0,0),vec3(11,0,-27),vec3(11,-43,-26),vec3(0,-1,.1),vec3(0,-1,.1),vec3(32,0,0),vec3(11,-43,-26),vec3(13,-72,-23),vec3(0,-1,.1),vec3(.01,.2,1),vec3(26,0,0),vec3(-9,-70,23),vec3(-10.5,-70,20),vec3(.7,.1,-.7),vec3(.8,.1,-.6),vec3(24,0,0),vec3(-6.64,-72.63,13.94),vec3(-6.56,-72.56,12.4),vec3(.92,.39,-.01),vec3(.94,.33,.07),vec3(70,0,0),vec3(21.76,-65.44,14.64),vec3(34.34,-66.88,21.3),vec3(-.88,.12,-.46),vec3(-.88,.12,-.46)"
"}"
";"
"int m=int(gl_WorkGroupID.s),e=g>>9;"
"float t=smoothstep(57600,59700,e)-smoothstep(69300,71300,e)*1.6;"
"mat3 x=mat3(-.8,-.6,-.01,-.59,.78,-.2,.13,-.16,-.98);"
"mat4 n=mat4(0);"
"vec3 r=vec3(14,-64,11),z=normalize(vec3(.3,1,.3));"
"float D=1.778,s=99,Q=3.14159,distance=.09;"
"out C"
"{"
"vec4 e;"
"}"
"p[];"
"vec3 N(vec3 e,float v,float i)"
"{"
"vec3 t=vec3(0);"
"float c=1;"
"for(int o=0;"
"o<4;"
"++o)e=x*e,t+=texture(l,e).stp*c,e*=v,c*=i;"
"return normalize(t);"
"}"
"float u(vec3 v)"
"{"
"vec3 c=v;"
"float o=v.t-13.;"
"for(float e=99;"
"e>.1;"
"e*=.3)"
"{"
"if(e>1)c.sp*=mat2(x);"
"else c*=x;"
"c=e*.77-abs(mod(c,e+e)-e);"
"float t=min(min(c.t,c.s),c.p);"
"o=max(o,t);"
"}"
"if(t>.0)"
"{"
"vec3 c=v-r;"
"vec2 v=mod(c.sp+e*.002,1.6)-.8;"
"float i=length(c.sp)*1.6-abs(c.t)*.5+1;"
"vec3 e=vec3(abs(v)-vec2(t*.4),i);"
"float t=length(max(e,0))+min(max(max(e.s,e.p),e.t),0);"
"o=min(o,t);"
"}"
"return o;"
"}"
"float h(vec3 v,vec3 m,float i,out float c,out vec3 e)"
"{"
"vec3 o=v;"
"c=0;"
"for(int a=0;"
"a<200&&c<i;"
"++a)"
"{"
"e=v+c*m;"
"float v=u(e);"
"if(v<.0)"
"{"
"for(int c=0;"
"c<9;"
"++c)"
"{"
"vec3 t=(o+e)*.5;"
"if(u(t)<.0)e=t;"
"else o=t;"
"}"
"return 1;"
"}"
"float n=length(e-r)-mix(1.5,4.,t);"
"if(n<.0)return -1;"
"o=e,c=min(i,c+min(v,n)*1.005+.005);"
"}"
"return 0;"
"}"
"vec4 I(vec3 p,vec3 v,out float j,out vec3 e)"
"{"
"float i=h(p,v,s,j,e);"
"if(i>.0)"
"{"
"vec3 a=vec3(.04,0,0),c=normalize(normalize(vec3(u(e+a),u(e+a.tst),u(e+a.tts)))+N(e*9,.1,1.4)*.05),l=r-e;"
"float n=length(l);"
"vec3 o=normalize(mix(l/n,z,mix(1.,smoothstep(20.,30.,n),t))),p=normalize(o-v);"
"float t=max(dot(c,o),0),m=max(dot(c,-v),0),s=acos(t),f=acos(m),j=dot(normalize(o-t*c),normalize(-v-m*c)),r=max(dot(c,p),0),v=1,u=r*r*3.+1,x=1.1*t*(.51+.45*max(0,j)*sin(max(s,f))*tan(min(s,f)))+t*(4./(Q*u*u))/((1-t*v+v)*(1-m*v+v)),d=h(e+o*a.s,o,33,t,c);"
"if(d>.0)x*=.6;"
"return vec4(mix(vec3(1.5,1.3,1),vec3(i),min(n*.009,1))*x,i);"
"}"
"return vec4(i);"
"}"
"void S(vec3 i,vec3 a,vec3 v,vec4 s,vec3 f,vec3 r,float u,float e,int h)"
"{"
"vec3 c=vec3(0);"
"for(int o=0;"
"o<h;"
"++o)"
"{"
"c+=texture(l,v*.03+c*.011+vec3(0,0,.1)).stp*f+r;"
"vec4 t=n*vec4(v+c*e*e,1);"
"t/=t.q;"
"vec2 c=texture(l,(i*.002-a*.003+vec3(m+o))*x).st*mix(.0022,.0033,e);"
"t.st+=c,gl_MeshVerticesNV[gl_PrimitiveCountNV].gl_Position=t;"
"vec4 v=mix(vec4(s.stp,1)*.6,vec4(mix(vec3(.5,.5,.3),vec3(.3),e),1),u);"
"p[gl_PrimitiveCountNV].e=vec4(v.st+max(c,0)*44,v.pq),gl_PrimitiveIndicesNV[gl_PrimitiveCountNV]=gl_PrimitiveCountNV,gl_PrimitiveCountNV+=1;"
"}"
"}"
"void main()"
"{"
"if(t>-.6)t*=mix(e&63,63,t)/63.;"
"gl_PrimitiveCountNV=0;"
"int x=m/384,V=m-x*384;"
"float Q=mix(-1.,1.,V/384.),N=mix(-1.,1.,(V+1)/384.),W=mix(-1.,1.,x/216.),Y=mix(-1.,1.,(x+1)/216.),X=mix(Q,N,.5),p=mix(W,Y,.5);"
"vec3 v,i,u=vec3(0,1,0);"
"float L=g,F=88000;"
"for(int e=0;"
"true;"
"e+=5)"
"{"
"vec3 o=f[e];"
"float c=o.s*F,t=L/c;"
"if(t<1)"
"{"
"v=mix(f[e+1],f[e+2],t),i=normalize(mix(f[e+3],f[e+4],t));"
"break;"
"}"
"L-=c;"
"}"
"vec2 g=vec2(X*D,p);"
"vec3 c=normalize(cross(i,u));"
"u=normalize(cross(c,i));"
"vec3 j=normalize(g.s*c+g.t*u+i);"
"float E=1.315;"
"n[0][0]=E/D,n[1][1]=E,n[2][2]=(distance+s)/(distance-s),n[2][3]=-1,n[3][2]=2.*distance*s/(distance-s);"
"mat3 D=transpose(mat3(c,u,-i));"
"mat4 b=mat4(D);"
"b[3]=vec4(D*-v,1),n*=b;"
"vec4 a=I(v,j,distance,c);"
"float n=distance/s,d=sqrt(1-n),_=smoothstep(10400,13100,e),s=smoothstep(12700,13100,e);"
"int f=1750;"
"float P=mod(e-200,f),I=length(c-mix(v,r,t))*11;"
"if(t<=0)P*=mix(e&255,255,P/f)/255;"
"float o=e>73000?.0:smoothstep(-200,0,-abs(P-I))*_*.3;"
"a+=vec4(.4,0,.1,0)*o,o=o*(min(abs(e-49500),abs(e-76000))<4500?.03:1)+(_-s)*.1,i=mix(z,normalize(c-r),t)*min(o,s)*.6,f=e/30,i+=texture(l,c*.001+p*vec3(.11,.1,.12)).stp*smoothstep(-.05,.0,-abs(p-texture(l,vec3(f*.11)+vec3(.11,.1,.11)).t*6.))*(.001-_*.001+t*.05);"
"if(a.q<.0)a=-a,o=max(o,t*((e&2048)>0?.5:.2));"
"s=a.s*.3+a.t*.59+.11*a.p,S(v,j,c,mix(a,vec4(s*.3),smoothstep(73000,76000,e)),vec3(o),i,n,d,64);"
"if(m<(smoothstep(13100,15000,e)-t)*21*21*21)"
"{"
"int a=m/441,s=(m-a*21*21)/21,f=m-a*21*21-s*21;"
"vec3 i=floor(v)+vec3(f,s,a)-10,t=texture(l,i*.011).stp;"
"n=min(length(t),1),d=sqrt(1-n),t.t=mod(t.t-e*.0006,1),i+=t*33,t=i-v,o=length(t),h(v,t/o,33,distance,c);"
"if(distance>o)"
"{"
"h(i,vec3(0,1,0),33,distance,c);"
"if(distance>=33)S(v,j,i,vec4(vec3(.9,.9,1),.01),vec3(.01),vec3(0,.02,0),n,d,32);"
"}"
"}"
"}"
#endif
"";
#if !defined(DNLOAD_RENAME_UNUSED)
#if defined(__GNUC__)
#define DNLOAD_RENAME_UNUSED __attribute__((unused))
#else
#define DNLOAD_RENAME_UNUSED
#endif
#endif
#endif
